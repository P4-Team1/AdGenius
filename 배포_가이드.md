# AdGenius 공유 및 배포 가이드

> 최종 수정: 2026-02-23

---

## 방법 1: Git으로 공유 (추천)

### 📤 공유하는 사람 (프로젝트 올리기)

```bash
# 1. GitHub에 레포지토리 생성 (github.com → New Repository)
#    - Repository name: AdsProject
#    - Public 또는 Private 선택

# 2. 로컬에서 커밋 & 푸시
cd AdsProject
git add -A
git commit -m "chore: 프로젝트 정리 및 Docker 배포 환경 구성"

# 3. GitHub 원격 저장소 연결 (최초 1회)
git remote set-url origin https://github.com/<내-아이디>/AdsProject.git

# 4. 푸시
git push origin main
```

> Private 레포인 경우, Settings → Collaborators에서 팀원의 GitHub 아이디를 추가해야 합니다.

### 📥 받는 사람 (프로젝트 가져오기)

```bash
# 1. 클론
git clone https://github.com/<공유자-아이디>/AdsProject.git
cd AdsProject

# 2. 환경변수 설정
cp backend/.env.example backend/.env
# → backend/.env 파일을 열고 OPENAI_API_KEY 입력

# 3-A. Docker로 실행 (GPU 있는 경우)
docker compose up --build -d

# 3-B. Docker로 실행 (GPU 없는 경우)
docker compose --profile cpu up --build -d frontend backend-cpu

# 4. 접속
# 웹: http://localhost:3000
# API: http://localhost:8000/docs
```

---

## 방법 2: Docker 이미지로 공유

> Git 없이 Docker 이미지 파일(.tar)을 직접 전달하는 방법

### 📤 공유하는 사람 (이미지 빌드 & 내보내기)

```bash
cd AdsProject

# 1. 이미지 빌드
docker compose build

# 2. 이미지를 파일로 저장
docker save ads-backend -o ads-backend.tar
docker save ads-frontend -o ads-frontend.tar

# 3. 필요한 파일을 팀원에게 전달
#    - ads-backend.tar     (Docker 이미지)
#    - ads-frontend.tar    (Docker 이미지)
#    - docker-compose.yml  (실행 설정)
#    - backend/.env.example (환경변수 템플릿)
```

> USB, 클라우드 드라이브, 메신저 등으로 위 4개 파일을 전달합니다.

### 📥 받는 사람 (이미지 불러오기 & 실행)

```bash
# 1. 작업 폴더 생성
mkdir AdGenius && cd AdGenius

# 2. 받은 파일 4개를 이 폴더에 복사

# 3. Docker 이미지 불러오기
docker load -i ads-backend.tar
docker load -i ads-frontend.tar

# 4. 환경변수 설정
mkdir -p backend
cp .env.example backend/.env
# → backend/.env 파일을 열고 OPENAI_API_KEY 입력

# 5. 실행
docker compose up -d

# 6. 접속
# 웹: http://localhost:3000
# API: http://localhost:8000/docs
```

---

## 방법 비교

| 항목             | Git 공유             | Docker 이미지 공유            |
| ---------------- | -------------------- | ----------------------------- |
| **팀원 필요 SW** | Docker + Git         | Docker만                      |
| **전달 방법**    | GitHub 링크 공유     | 파일 직접 전달 (USB/드라이브) |
| **파일 크기**    | 가벼움 (소스코드만)  | 무거움 (~2~4GB)               |
| **첫 실행 시간** | 느림 (빌드 필요)     | 빠름 (빌드 완료된 이미지)     |
| **업데이트**     | `git pull` 한 줄     | 이미지 다시 전달              |
| **추천 상황**    | 지속 협업, 코드 수정 | 데모, 일회성 테스트           |

---

## 접속 확인

| 서비스        | URL                        | 설명       |
| ------------- | -------------------------- | ---------- |
| **웹 서비스** | http://localhost:3000      | 메인 화면  |
| **API 문서**  | http://localhost:8000/docs | Swagger UI |

---

## 주요 명령어

```bash
docker compose logs -f              # 전체 로그
docker compose logs -f backend      # Backend 로그만
docker compose restart              # 재시작
docker compose down                 # 중지
docker compose down -v              # 완전 삭제 (데이터 포함)
docker compose build --no-cache     # 캐시 없이 재빌드
```

---

## 문제 해결

| 증상                                      | 원인                         | 해결                                                      |
| ----------------------------------------- | ---------------------------- | --------------------------------------------------------- |
| `could not select device driver "nvidia"` | GPU 없음 또는 Toolkit 미설치 | CPU 모드로 실행                                           |
| 포트 충돌 (`address already in use`)      | 다른 앱이 3000/8000 사용 중  | docker-compose.yml에서 포트 변경                          |
| Frontend에서 API 호출 실패                | API URL 불일치               | docker-compose.yml의 `NEXT_PUBLIC_API_URL` 확인 후 재빌드 |
| OpenAI API 오류 (403)                     | API 키 무효 또는 크레딧 소진 | backend/.env의 `OPENAI_API_KEY` 확인                      |
| 이미지 생성 매우 느림                     | CPU 모드 실행 중             | 정상 (GPU 사용 시 1~2분, CPU 시 ~15분)                    |
